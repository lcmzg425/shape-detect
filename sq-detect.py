import os

import matplotlib
import numpy as np
import cv2
from matplotlib import pyplot as plt
import generate
import match

#输入图形

e1 = [[455,387],[454,388],[451,388],[448,389],[444,390],[441,391],[438,392],[433,393],[429,395],[423,396],[417,399],[413,402],[407,406],[403,410],[398,416],[393,424],[390,427],[387,433],[385,437],[383,442],[383,446],[383,450],[383,457],[385,464],[387,471],[390,477],[392,484],[394,489],[397,493],[400,497],[402,501],[405,505],[408,507],[412,511],[416,514],[420,516],[425,518],[432,520],[439,521],[447,522],[455,522],[464,522],[473,522],[483,522],[494,521],[503,519],[513,517],[524,513],[532,508],[542,503],[551,496],[558,491],[565,486],[572,481],[576,477],[580,472],[584,468],[586,465],[588,463],[589,461],[589,458],[590,456],[590,453],[591,451],[591,448],[591,445],[590,443],[589,440],[587,438],[584,435],[582,432],[577,430],[572,426],[566,422],[559,419],[552,415],[546,412],[538,409],[529,404],[521,400],[511,397],[501,395],[492,393],[483,390],[475,388],[467,387],[461,386],[455,385],[450,385],[445,384],[440,384],[437,383],[436,383],[435,383]]

#偏标准正
e2 = [[357,405],[357,407.3],[357,411.3],[357,416.7],[357,421.6],[357,428.85],[357,436.15],[357,444],[357,452],[356.85,460],[356,468.3],[355.15,478],[354.85,488.15],[354.15,498.7],[354,507.85],[354,516],[354,523.85],[354,530.7],[354,535.7],[354,539.15],[354,542.85],[354,545.85],[354,547.85],[354,549],[354,550],[354,551],[354,552],[354,553],[354,554],[354,555],[354.75,555.85],[358.85,556],[363.15,556],[368.3,556],[375.15,556],[383,556],[391,556],[399.45,556],[410,556],[421.3,556],[433.85,556],[446,555.85],[457.7,555],[467.7,554.15],[476.3,554],[485.1,553.85],[490,553.15],[493.85,553],[496.85,553],[498.85,553],[500,553],[501,552.7],[502,551.3],[503,551],[503.85,550.85],[504.15,550.15],[504.85,549.7],[505.15,547.85],[506,544.7],[507.15,540],[508.85,534.7],[510,527.85],[511,519.7],[512,510.3],[512.85,501.85],[513,492.85],[513,483.6],[513,476.4],[513,467.15],[513,458.3],[513,450.7],[513,442.15],[513,434.6],[513,430.15],[513,427],[513,424.15],[513,422.15],[513,421],[513,420],[513,418.85],[513,417.15],[513,416],[513,415],[512.55,414.15],[509.85,414],[506,414],[501.7,414],[496.15,414],[490.7,414],[484,414],[476.7,413.85],[468,413.15],[458.85,413],[449.15,413],[440,413],[431.3,413],[423.85,413],[416.3,413],[410.15,413],[405.15,413],[401.15,413.15],[398,413.85],[394.85,414],[391.3,414.15],[389.15,415],[388,415.85],[387,416],[386,416],[385,416],[383.7,416],[381.3,416],[380,416],[379,416],[377.85,416],[375.7,416.15],[372.15,416.85],[369.15,417],[367,417.15],[365,417.85],[363.15,418],[362,418],[361,418.15],[360,418.85],[359,419]]

#长
e0 = [[351,437],[351,441],[351,445],[351,448],[350,453],[350,456],[349,460],[349,464],[349,467],[348,471],[348,474],[348,478],[348,484],[348,489],[348,496],[348,501],[348,508],[348,514],[348,516],[348,519],[348,522],[348,524],[348,525],[348,526],[348,527],[349,527],[353,527],[355,526],[358,525],[362,525],[368,525],[374,525],[382,524],[389,524],[397,523],[405,523],[413,522],[420,522],[427,521],[434,521],[442,521],[449,521],[455,521],[462,521],[470,521],[476,521],[484,522],[491,522],[496,522],[501,522],[508,522],[514,522],[519,522],[525,522],[530,521],[533,521],[537,520],[539,520],[541,520],[543,520],[545,520],[546,520],[548,520],[549,519],[550,519],[552,518],[554,518],[554,517],[555,517],[557,517],[559,517],[560,517],[561,517],[563,516],[564,516],[565,515],[566,515],[566,513],[567,509],[567,506],[568,503],[568,500],[569,494],[570,490],[570,486],[571,478],[571,472],[571,468],[572,463],[572,459],[572,454],[572,451],[572,449],[572,447],[572,446],[572,444],[572,443],[572,442],[572,441],[572,440],[572,439],[567,439],[562,439],[555,441],[548,442],[540,443],[530,443],[522,444],[510,444],[500,444],[488,444],[475,444],[463,444],[452,444],[443,444],[433,444],[424,444],[415,444],[408,444],[401,444],[395,444],[389,444],[382,444],[377,444],[372,444],[367,444],[363,444],[359,444],[356,444],[352,444],[350,444],[348,444],[346,444],[345,444],[344,444],[344,445],[343,445]]

generate.show(e0)
#归一化e8
kk = generate.format(e0)
print("ratio is %.2f " % kk)

#获取标准图形
circle = generate.generateCircle()
sq = generate.generateSq()
pall = generate.generatePall()
tria = generate.generateTriangle()

#np.array
points = np.array(e0, np.float32)
sq_points = np.array(sq, np.float32)
pall_points = np.array(pall, np.float32)
circle_points = np.array(circle, np.float32)

#分别比较
match.match(points, sq_points, "sq")
match.match(points, pall_points, "pall")
match.match(points, circle_points, "circle")

